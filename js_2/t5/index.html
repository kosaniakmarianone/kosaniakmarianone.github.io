<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript v2. T5</title>
    <style>
        body{font-family: sans-serif;color:navy}
        p{font-size: 25px;}
        a,b{color: red}
		#message{background: lime;max-width: 100%;}
		#message--p{display: inline-block;background: orange}
		#message2{background: orange;max-width: 1000px}
		img{
			max-width: 900px;
			border: 2px solid red;
		}
        xmp{ 
            background: lightyellow;
        }
    </style>
    <link rel="icon" href="../Untitled.png">
</head>
<body>
    <h1>Редагування та видалення документів у firebase (№ 2)</h1>
    
    <h3 align="center">
        <img src="1.gif" width="900px" alt="" >
    </h3>

    <h3>1. Створіть функцію <b>modalGetUser(id)</b> яка прийматиме id документа та зчитуватиме інформацію про користувача із бази данних. Записуйте у форму значення вибраного користувача. Зберігайте id користувача у якого в майбутньому будете зберігати нові значення.</h3>
    <xmp>
        <script>
            // Отримати всю інформацю про документ із вказаним id
            
            db.collection("users")
            .doc(id)
            .get(user)
            .then(function(res){
                const data = res.data();
                console.log(data);
                
                
                //отримане значення можна відобразити або присвоїти його якомусь полю для введення

                document.getElementById("name").value = data.name;
                ....
            });
        </script>
    </xmp> 

    
    <h3>2. Привяжіть до кнопки <b>Save changes</b> функцію <b>editUser(id)</b>. Функція буде зберігати редаговані поля для користувача.</h3>
    
    <h3>3. Зберігайте данні по кліку на кнопку "Save changes"</h3>

    <xmp>
        <script>
            const user = {
                //...
            }

            // редагування документу у firebase по id
            //update оновлює вказані поля документа не змінюючи інші які не вказані у user 
            db.collection("users").doc(id).update(user);

            // Можна відслідковувати заверешення операції видалення
            db.collection("users").doc(id).update(user).then( function(){
                // дії після редагування
                console.log("Document is updated!")
            });


            //************************
            //set повністю замінює документа 
             db.collection("users").doc(id).set(user);

            // Можна відслідковувати заверешення операції видалення
            db.collection("users").doc(id).set(user).then( function(){
                // дії після редагування
                console.log("Document is updated!")
            });
        </script>
    </xmp>
</body>
</html>
